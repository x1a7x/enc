# Post-Quantum File Encryption Tool

## Overview
**Post-Quantum File Encryption Tool** is a Rust-based program that encrypts and decrypts files using **post-quantum cryptographic algorithms**. It leverages **FrodoKEM**, a post-quantum key encapsulation mechanism, combined with the **ChaCha20** stream cipher for efficient encryption. By using modern, quantum-safe cryptographic techniques, this tool aims to provide robust data security against even potential future quantum computers.

This project is designed as an educational experiment for learning about newer cryptographic algorithms, especially those resilient to quantum computing advancements.

## Features
- **Post-Quantum Key Exchange**: Uses the **FrodoKEM-640-SHAKE** algorithm from the `pqcrypto-frodo` crate to generate quantum-safe key material.
- **Symmetric Key Derivation**: Derives a strong symmetric key using the **BLAKE3** cryptographic hash function to ensure high entropy and secure key material.
- **Stream Cipher Encryption**: Uses the **ChaCha20** stream cipher to encrypt files securely in chunks, ensuring both speed and security.
- **File-Based Encryption and Decryption**: Encrypt and decrypt files with support for reading and writing large files in chunks, avoiding memory overload.

## Cryptographic Concepts Used
1. **FrodoKEM (FrodoKEM-640-SHAKE)**: A post-quantum key exchange mechanism used to generate a shared secret between two parties. The shared secret is subsequently used to derive a symmetric key.
2. **BLAKE3 Hash Function**: A cryptographic hash function that provides high security, performance, and versatility. Here, BLAKE3 is used to derive a symmetric key from the shared secret.
3. **ChaCha20 Stream Cipher**: A modern, highly efficient stream cipher that is used to encrypt and decrypt file contents. ChaCha20 is known for its simplicity, speed, and resistance to side-channel attacks.

## How It Works
The tool encrypts or decrypts files using a symmetric key derived from the post-quantum secure FrodoKEM key exchange mechanism. Here is a step-by-step breakdown of the process:

### 1. Key Generation
- The program first generates a **keypair** using **FrodoKEM**.
- It then encapsulates a randomly generated key to produce a **shared secret**.
- The shared secret is hashed using **BLAKE3** to derive a **32-byte symmetric key**, which will be used by the stream cipher.

### 2. File Encryption/Decryption
- The **ChaCha20** stream cipher is used for both encryption and decryption.
- The file is read in **4 KB chunks**, and each chunk is XORed with a keystream generated by ChaCha20 to either encrypt or decrypt the file.
- The program uses a **12-byte nonce** initialized with zeros for simplicity. In practice, this nonce should be randomized to ensure that identical plaintexts do not produce identical ciphertexts.

### 3. Key Storage
- The generated key is saved to a file (`key.key`) to allow the user to encrypt and decrypt data using the same key.
- This key file must be securely stored and protected since its compromise could lead to decryption of all previously encrypted data.

## Usage
### Prerequisites
- **Rust**: Make sure you have Rust installed. You can download it from [rust-lang.org](https://www.rust-lang.org/tools/install).

### Build and Run
1. **Clone the Repository**:
   ```sh
   git clone <repository_url>
   cd post_quantum_file_crypto
   ```

2. **Build the Project**:
   ```sh
   cargo build --release
   ```

3. **Run the Program**:
   The program can either **encrypt** or **decrypt** a file. When run, it will prompt the user to enter the mode (`E` for encryption, `D` for decryption), the input file path, and the output file path.

   ```sh
   cargo run --release
   ```

4. **Example Execution**:
   - The program will prompt:
     ```
     Enter mode (E for encrypt, D for decrypt):
     ```
   - Enter `E` to encrypt or `D` to decrypt.
   - Then it will prompt for the **input filename** and the **output filename**.

### Notes
- **Key File**: The key used for encryption and decryption is saved in a file called `key.key`. Make sure to back up this file securely as it is required for decryption.
- **Chunk Size**: The file is processed in chunks of 4 KB to prevent memory issues, making it suitable for large files.
- **Security Warning**: The nonce used in ChaCha20 is currently a fixed 12-byte array of zeros. For real-world applications, always use a unique, randomized nonce for each encryption operation.

## Dependencies
The project relies on the following Rust crates:
- `pqcrypto-frodo`: Provides post-quantum cryptography algorithms such as **FrodoKEM**.
- `pqcrypto-traits`: Defines traits used by `pqcrypto-frodo`.
- `blake3`: A cryptographic hash function used for key derivation.
- `rand`: Used to generate random values as needed.
- `chacha20`: The stream cipher used to perform encryption and decryption.

### Cargo.toml
```toml
[package]
name = "post_quantum_file_crypto"
version = "0.2.0"
edition = "2021"

[dependencies]
pqcrypto-frodo = "0.4.11"
pqcrypto-traits = "0.3.5"
blake3 = "1.5.4"
rand = "0.8.5"
chacha20 = "0.9.1"
```

## Security Considerations
- **Post-Quantum Security**: The key exchange is resistant to quantum computer attacks due to **FrodoKEM**, which is considered a quantum-safe algorithm.
- **Nonce Usage**: In this demonstration, the nonce used in ChaCha20 is fixed. In practice, it should be generated randomly for each encryption to ensure security and prevent ciphertext reuse attacks.
- **Key Management**: The key file (`key.key`) should be handled with caution. Losing this key means losing the ability to decrypt files, and unauthorized access to this key compromises the encrypted data.

## License
This project is licensed under the **MIT License**.

## Acknowledgments
- **Rust Crate Developers**: Thanks to the authors of the `pqcrypto`, `chacha20`, and `blake3` crates for providing high-quality cryptographic implementations.
- **Learning Motivation**: This project was created as part of a personal learning journey to explore the intersection of post-quantum cryptography and modern symmetric encryption.

## Future Improvements
- **Randomized Nonce**: Update the encryption process to use a randomly generated nonce for each file, and store it alongside the ciphertext.
- **Authenticated Encryption**: Replace ChaCha20 with **ChaCha20-Poly1305** to add message integrity and authenticity.
- **CLI Enhancements**: Add support for command-line arguments using the `clap` crate to make the tool easier to use for scripting purposes.

## Contact
For any questions or suggestions, feel free to contact the author via GitHub.

---

This README provides a comprehensive overview of how the Post-Quantum File Encryption Tool works, its goals, and how to use it. Let me know if there's anything else you'd like to add or modify!

